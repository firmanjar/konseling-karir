<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Sistem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="img/Logo_ubhara.png" />

    <style>
      body {
        background-image: url("https://ubharajaya.ac.id/wp-content/uploads/2024/03/Pilihan-Foto-Gedung-Ubhara-Jaya-1024x680.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
      }
      .backdrop-blur {
        backdrop-filter: blur(8px);
        background-color: rgba(16, 46, 80, 0.7);
      }
      .btn-primary {
        background-color: #e78b48;
      }
      .btn-primary:hover {
        background-color: #be3d2a;
      }
      .text-accent {
        color: #f5c45e;
      }
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: #4caf50;
        color: white;
        padding: 15px;
        border-radius: 4px;
        z-index: 1000;
        display: none;
      }
      .error {
        background-color: #be3d2a !important;
      }
      .login-container {
        position: relative;
        overflow: hidden;
        min-height: 300px;
      }
      .login-form {
        transition: transform 0.5s ease-in-out;
        width: 100%;
      }
      .login-admin {
        transform: translateX(-100%);
      }
      .toggle-switch {
        display: flex;
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: 30px;
        padding: 4px;
        margin-bottom: 12px;
      }
      .toggle-option {
        flex: 1;
        text-align: center;
        padding: 6px;
        border-radius: 30px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .toggle-option.active {
        background-color: #e78b48;
        color: white;
        font-weight: bold;
      }
    </style>
  </head>
  <body class="h-screen flex items-center justify-center p-2">
    <div class="w-full max-w-sm">
      <div class="bg-white/10 rounded-lg shadow-xl overflow-hidden backdrop-blur border border-white/20 max-h-[90vh]">
        <div class="bg-[#102E50] p-4 text-center">
          <img src="img/Logo_ubhara.png" alt="Logo Ubhara" class="h-16 mx-auto mb-2" />
          <h1 class="text-xl font-bold text-white">Login Sistem</h1>
          <p class="text-[#F5C45E]">Silakan pilih jenis login</p>
        </div>

        <div class="px-4 pt-2">
          <div class="toggle-switch">
            <div id="mahasiswaToggle" class="toggle-option active">Mahasiswa</div>
            <div id="adminToggle" class="toggle-option">Admin</div>
          </div>
        </div>

        <div class="login-container">
          <!-- Mahasiswa Form -->
          <div id="mahasiswaForm" class="login-form p-4 space-y-4">
            <div>
              <label for="login" class="block text-sm font-medium text-white">Email atau NIM</label>
              <input type="text" id="login" required class="mt-1 w-full px-3 py-2 bg-white/20 border border-white/30 rounded-md text-white placeholder-white/70 focus:outline-none focus:ring-[#E78B48]" />
            </div>

            <div>
              <label for="password" class="block text-sm font-medium text-white">Password</label>
              <input type="password" id="password" required class="mt-1 w-full px-3 py-2 bg-white/20 border border-white/30 rounded-md text-white placeholder-white/70 focus:outline-none focus:ring-[#E78B48]" />
            </div>

            <div class="flex items-center justify-between">
              <label class="flex items-center text-white text-sm">
                <input id="remember-me" type="checkbox" class="h-4 w-4 text-[#E78B48] border-white/30 rounded bg-white/20" />
                <span class="ml-2">Ingat saya</span>
              </label>
              <a href="#" class="text-sm text-[#F5C45E] hover:text-[#E78B48]">Lupa password?</a>
            </div>

            <button type="button" id="mahasiswaLoginBtn" class="w-full py-2 rounded-md text-white btn-primary">Masuk sebagai Mahasiswa</button>

            <p class="text-center text-sm text-white">
              Belum punya akun?
              <a href="registrasi.html" class="text-[#F5C45E] hover:text-[#E78B48]">Daftar disini</a>
            </p>
          </div>

          <!-- Admin Form -->
          <div id="adminForm" class="login-form login-admin p-4 space-y-4 absolute top-0 left-0 right-0">
            <div>
              <label for="adminUsername" class="block text-sm font-medium text-white">Username Admin</label>
              <input type="text" id="adminUsername" required class="mt-1 w-full px-3 py-2 bg-white/20 border border-white/30 rounded-md text-white placeholder-white/70 focus:outline-none focus:ring-[#E78B48]" />
            </div>

            <div>
              <label for="adminPassword" class="block text-sm font-medium text-white">Password Admin</label>
              <input type="password" id="adminPassword" required class="mt-1 w-full px-3 py-2 bg-white/20 border border-white/30 rounded-md text-white placeholder-white/70 focus:outline-none focus:ring-[#E78B48]" />
            </div>

            <div class="flex items-center justify-between">
              <label class="flex items-center text-white text-sm">
                <input id="remember-admin" type="checkbox" class="h-4 w-4 text-[#E78B48] border-white/30 rounded bg-white/20" />
                <span class="ml-2">Ingat saya</span>
              </label>
              <a href="#" class="text-sm text-[#F5C45E] hover:text-[#E78B48]">Lupa password?</a>
            </div>

            <button type="button" id="adminLoginBtn" class="w-full py-2 rounded-md text-white btn-primary">Masuk sebagai Admin</button>

            <p class="text-center text-sm text-white">
              Login sebagai
              <a href="#" id="switchToMahasiswa" class="text-[#F5C45E] hover:text-[#E78B48]">Mahasiswa</a>
            </p>
          </div>
        </div>

        <!-- Footer dinaikkan -->
        <div class="px-4 py-2 mt-2 bg-[#102E50]/80 text-center">
          <p class="text-xs text-white/80">Â© 2023 Universitas Bhayangkara Jakarta Raya.</p>
        </div>
      </div>
    </div>

    <div id="toast" class="toast"></div>

    <script>
      document.getElementById("mahasiswaToggle").addEventListener("click", function () {
        this.classList.add("active");
        document.getElementById("adminToggle").classList.remove("active");
        document.getElementById("mahasiswaForm").classList.remove("login-admin");
        document.getElementById("adminForm").classList.add("login-admin");
      });

      document.getElementById("adminToggle").addEventListener("click", function () {
        this.classList.add("active");
        document.getElementById("mahasiswaToggle").classList.remove("active");
        document.getElementById("mahasiswaForm").classList.add("login-admin");
        document.getElementById("adminForm").classList.remove("login-admin");
      });

      document.getElementById("switchToMahasiswa").addEventListener("click", function (e) {
        e.preventDefault();
        document.getElementById("mahasiswaToggle").click();
      });

      document.getElementById("mahasiswaLoginBtn").addEventListener("click", function () {
        const loginInput = document.getElementById("login").value;
        const password = document.getElementById("password").value;
        const users = JSON.parse(localStorage.getItem("users")) || [];
        const user = users.find((u) => (u.email === loginInput || u.nim === loginInput) && u.password === password);
        if (user) {
          sessionStorage.setItem("loggedInUser", JSON.stringify(user));
          showToast("Login berhasil!", "success");
          setTimeout(() => window.location.href = "dashboard.html", 1000);
        } else {
          showToast("Email/NIM atau password salah", "error");
        }
      });

      document.getElementById("adminLoginBtn").addEventListener("click", function () {
        const username = document.getElementById("adminUsername").value;
        const password = document.getElementById("adminPassword").value;
        if (username === "admin" && password === "admin123") {
          sessionStorage.setItem("loggedInUser", JSON.stringify({ username, role: "admin" }));
          showToast("Login admin berhasil!", "success");
          setTimeout(() => window.location.href = "dashboard_admin.html", 1000);
        } else {
          showToast("Username atau password admin salah", "error");
        }
      });

      function showToast(message, type) {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.style.display = "block";
        toast.className = type === "error" ? "toast error" : "toast";
        setTimeout(() => toast.style.display = "none", 3000);
      }
    </script>
  </body>
</html>
